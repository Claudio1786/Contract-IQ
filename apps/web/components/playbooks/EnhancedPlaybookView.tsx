'use client';\n\nimport React, { useState } from 'react';\nimport { Card, Button } from '../ui';\nimport { NegotiationPlaybook } from './EnhancedPlaybookGenerator';\n\nexport interface EnhancedPlaybookViewProps {\n  playbook: NegotiationPlaybook;\n  metadata?: any; // Multi-LLM metadata from API response\n  onEdit?: () => void;\n  onExport?: () => void;\n  className?: string;\n}\n\nexport const EnhancedPlaybookView: React.FC<EnhancedPlaybookViewProps> = ({\n  playbook,\n  metadata,\n  onEdit,\n  onExport,\n  className = ''\n}) => {\n  const [showMetadata, setShowMetadata] = useState(false);\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const formatCost = (cost: number) => {\n    return `$${cost.toFixed(4)}`;\n  };\n\n  const getConfidenceColor = (confidence: number) => {\n    if (confidence >= 0.85) return 'text-green-600 bg-green-50';\n    if (confidence >= 0.7) return 'text-yellow-600 bg-yellow-50';\n    return 'text-red-600 bg-red-50';\n  };\n\n  const getConfidenceLabel = (confidence: number) => {\n    if (confidence >= 0.85) return 'High Confidence';\n    if (confidence >= 0.7) return 'Medium Confidence';\n    return 'Low Confidence';\n  };\n\n  return (\n    <div className={`space-y-8 ${className}`}>\n      {/* Header with Enhanced Metadata */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n        <div className=\"flex justify-between items-start mb-4\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n              {playbook.title}\n            </h1>\n            <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n              <span>üìÖ Generated: {formatDate(playbook.createdAt)}</span>\n              <span>üìÑ Contract: {playbook.contractType}</span>\n              <span>üéØ Scenario: {playbook.scenario}</span>\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-3\">\n            {onEdit && (\n              <Button\n                onClick={onEdit}\n                className=\"bg-gray-100 hover:bg-gray-200 text-gray-700\"\n              >\n                ‚úèÔ∏è Edit\n              </Button>\n            )}\n            {onExport && (\n              <Button\n                onClick={onExport}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n              >\n                üì§ Export\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {/* Enhanced Metadata Section */}\n        {metadata && (\n          <div className=\"border-t border-gray-200 pt-4\">\n            <div className=\"flex justify-between items-center mb-3\">\n              <h3 className=\"text-sm font-medium text-gray-700\">\n                ü§ñ AI Generation Details\n              </h3>\n              <button\n                onClick={() => setShowMetadata(!showMetadata)}\n                className=\"text-sm text-blue-600 hover:text-blue-800\"\n              >\n                {showMetadata ? 'Hide Details' : 'Show Details'}\n              </button>\n            </div>\n            \n            {/* Quick Summary */}\n            <div className=\"flex items-center space-x-6 text-sm\">\n              {metadata.modelUsed && (\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-gray-600\">Model:</span>\n                  <span className=\"font-medium bg-blue-100 text-blue-800 px-2 py-1 rounded\">\n                    {metadata.modelUsed}\n                  </span>\n                </div>\n              )}\n              \n              {metadata.confidence !== undefined && (\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-gray-600\">Quality:</span>\n                  <span className={`font-medium px-2 py-1 rounded text-xs ${getConfidenceColor(metadata.confidence)}`}>\n                    {getConfidenceLabel(metadata.confidence)}\n                  </span>\n                </div>\n              )}\n              \n              {metadata.cost !== undefined && (\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-gray-600\">Cost:</span>\n                  <span className=\"font-medium text-green-700\">\n                    {formatCost(metadata.cost)}\n                  </span>\n                </div>\n              )}\n              \n              {metadata.processingTime && (\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-gray-600\">Generated in:</span>\n                  <span className=\"font-medium text-gray-700\">\n                    {(metadata.processingTime / 1000).toFixed(1)}s\n                  </span>\n                </div>\n              )}\n            </div>\n            \n            {/* Detailed Metadata */}\n            {showMetadata && (\n              <div className=\"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"bg-gray-50 p-4 rounded-lg\">\n                  <h4 className=\"font-medium text-gray-900 mb-2\">Generation Strategy</h4>\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Primary Model:</span>\n                      <span className=\"font-medium\">{metadata.primaryModel || 'N/A'}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Final Model Used:</span>\n                      <span className=\"font-medium\">{metadata.modelUsed || 'N/A'}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Response Length:</span>\n                      <span className=\"font-medium\">{metadata.responseLength?.toLocaleString() || 'N/A'} chars</span>\n                    </div>\n                  </div>\n                </div>\n                \n                {metadata.crossValidation && (\n                  <div className=\"bg-blue-50 p-4 rounded-lg\">\n                    <h4 className=\"font-medium text-gray-900 mb-2\">Cross-Validation</h4>\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Fallback Model:</span>\n                        <span className=\"font-medium\">{metadata.crossValidation.fallbackModel}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Agreement Score:</span>\n                        <span className=\"font-medium\">\n                          {(metadata.crossValidation.agreement * 100).toFixed(1)}%\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Recommended:</span>\n                        <span className={`font-medium capitalize ${\n                          metadata.crossValidation.recommendedApproach === 'primary' \n                            ? 'text-green-600' \n                            : 'text-blue-600'\n                        }`}>\n                          {metadata.crossValidation.recommendedApproach} model\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Objectives Overview */}\n      <Card>\n        <Card.Header>\n          <Card.Title>üéØ Negotiation Objectives</Card.Title>\n        </Card.Header>\n        <Card.Content>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {playbook.objectives.map((objective, index) => (\n              <div key={index} className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <div className=\"font-medium text-blue-900\">{objective}</div>\n              </div>\n            ))}\n          </div>\n        </Card.Content>\n      </Card>\n\n      {/* Main Content */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n        <div className=\"prose max-w-none\">\n          <div className=\"whitespace-pre-wrap text-gray-800 leading-relaxed\">\n            {playbook.content}\n          </div>\n        </div>\n      </div>\n\n      {/* Structured Sections (if available) */}\n      {playbook.sections && Object.keys(playbook.sections).length > 0 && (\n        <div className=\"space-y-6\">\n          <h2 className=\"text-2xl font-bold text-gray-900\">üìã Structured Sections</h2>\n          \n          {playbook.sections.executiveSummary && (\n            <Card>\n              <Card.Header>\n                <Card.Title>üìä Executive Summary</Card.Title>\n              </Card.Header>\n              <Card.Content>\n                <div className=\"prose max-w-none\">\n                  <div className=\"whitespace-pre-wrap text-gray-700\">\n                    {playbook.sections.executiveSummary}\n                  </div>\n                </div>\n              </Card.Content>\n            </Card>\n          )}\n\n          {playbook.sections.talkingPoints && (\n            <Card>\n              <Card.Header>\n                <Card.Title>üí¨ Key Talking Points</Card.Title>\n              </Card.Header>\n              <Card.Content>\n                <div className=\"prose max-w-none\">\n                  <div className=\"whitespace-pre-wrap text-gray-700\">\n                    {playbook.sections.talkingPoints}\n                  </div>\n                </div>\n              </Card.Content>\n            </Card>\n          )}\n\n          {playbook.sections.riskMitigation && (\n            <Card>\n              <Card.Header>\n                <Card.Title>üõ°Ô∏è Risk Mitigation</Card.Title>\n              </Card.Header>\n              <Card.Content>\n                <div className=\"prose max-w-none\">\n                  <div className=\"whitespace-pre-wrap text-gray-700\">\n                    {playbook.sections.riskMitigation}\n                  </div>\n                </div>\n              </Card.Content>\n            </Card>\n          )}\n\n          {playbook.sections.tactics && (\n            <Card>\n              <Card.Header>\n                <Card.Title>üéÆ Negotiation Tactics</Card.Title>\n              </Card.Header>\n              <Card.Content>\n                <div className=\"prose max-w-none\">\n                  <div className=\"whitespace-pre-wrap text-gray-700\">\n                    {playbook.sections.tactics}\n                  </div>\n                </div>\n              </Card.Content>\n            </Card>\n          )}\n\n          {playbook.sections.timeline && (\n            <Card>\n              <Card.Header>\n                <Card.Title>‚è±Ô∏è Timeline & Phases</Card.Title>\n              </Card.Header>\n              <Card.Content>\n                <div className=\"prose max-w-none\">\n                  <div className=\"whitespace-pre-wrap text-gray-700\">\n                    {playbook.sections.timeline}\n                  </div>\n                </div>\n              </Card.Content>\n            </Card>\n          )}\n\n          {playbook.sections.successMetrics && (\n            <Card>\n              <Card.Header>\n                <Card.Title>üìà Success Metrics</Card.Title>\n              </Card.Header>\n              <Card.Content>\n                <div className=\"prose max-w-none\">\n                  <div className=\"whitespace-pre-wrap text-gray-700\">\n                    {playbook.sections.successMetrics}\n                  </div>\n                </div>\n              </Card.Content>\n            </Card>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EnhancedPlaybookView;\n"